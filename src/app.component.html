<header class="profile-header" aria-label="Profile Header Section">
  <div class="header-logo">
    <img
      src="/src/assets/Sfw-Logo.svg"
      alt="SFW Technologies Logo"
      title="Company Logo"
      role="img"
    />
  </div>

  <div class="header-overlay">
    <div class="header-content">
      <div class="header-text">
        <h1 aria-label="Welcome aboard heading">Welcome aboard!</h1>
        <p>Weâ€™re excited to have you join the team.</p>
        <p>
          Please complete your onboarding details so we can set up your profile
          for a smooth start.
        </p>
      </div>
    </div>
  </div>
</header>

<div class="container">
  <form
    [formGroup]="employeeForm"
    (ngSubmit)="onSubmit()"
    aria-label="Employee Onboarding Form"
  >
    <!-- ===========================
         PERSONAL INFORMATION
    ============================ -->
    <mat-card
      class="mat-section"
      formGroupName="personal_information"
      aria-label="Personal Information Section"
    >
      <mat-card-header>
        <mat-card-title>
          <span class="icon-wrap" aria-hidden="true">
            <svg width="24" height="24" stroke="currentColor" fill="none">
              <title>User Icon</title>
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              />
            </svg>
          </span>
          Personal Information
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="grid grid-2">
          <!-- First Name -->
          <mat-form-field appearance="outline">
            <mat-label>First Name</mat-label>
            <input matInput formControlName="first_name" placeholder="Enter First Name" />
          </mat-form-field>

          <!-- Last Name -->
          <mat-form-field appearance="outline">
            <mat-label>Last Name</mat-label>
            <input matInput formControlName="last_name" placeholder="Enter Last Name" />
          </mat-form-field>

          <!-- Full Name -->
          <mat-form-field appearance="outline">
            <mat-label>Full Name</mat-label>
            <input matInput formControlName="full_name" placeholder="Full Name" readonly />
          </mat-form-field>

          <!-- Gender -->
          <mat-form-field appearance="outline">
            <mat-label>Gender</mat-label>
            <mat-select formControlName="gender">
              <mat-option value="" disabled>Select Gender</mat-option>
              <mat-option
                *ngFor="let option of genderOptions"
                [value]="option.id"
              >
                {{ option.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <!-- DOB -->
          <mat-form-field appearance="outline">
            <mat-label>Date of Birth</mat-label>
            <input
              matInput
              [matDatepicker]="picker"
              formControlName="date_of_birth"
              placeholder="Select Date"
            />
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- ===========================
         CONTACT INFORMATION
    ============================ -->
    <mat-card class="mat-section" formGroupName="contact_information">
      <mat-card-header>
        <mat-card-title>
          <span class="icon-wrap" aria-hidden="true">
            <svg width="24" height="24" stroke="currentColor" fill="none">
              <title>Contact Icon</title>
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
              />
            </svg>
          </span>
          Contact Information
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="grid grid-2">
          <!-- Email -->
          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" type="email" />
          </mat-form-field>

          <!-- Phone -->
          <mat-form-field appearance="outline">
            <mat-label>Phone Number</mat-label>
            <input matInput formControlName="phone_number" type="tel" />
          </mat-form-field>

          <!-- Alternate Phone -->
          <mat-form-field appearance="outline">
            <mat-label>Alternate Phone</mat-label>
            <input matInput formControlName="alternate_phone" type="tel" />
          </mat-form-field>

          <!-- Address Line 1 -->
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Address Line 1</mat-label>
            <input matInput formControlName="address_line1" />
          </mat-form-field>

          <!-- Address Line 2 -->
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Address Line 2</mat-label>
            <input matInput formControlName="address_line2" />
          </mat-form-field>

          <div class="grid grid-3 full-width">
            <!-- Country -->
            <mat-form-field appearance="outline">
              <mat-label>Country</mat-label>
              <mat-select formControlName="country">
                <mat-option value="" disabled>Select Country</mat-option>
                <mat-option *ngFor="let c of countries()" [value]="c.id">
                  {{ c.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <!-- State -->
            <mat-form-field appearance="outline">
              <mat-label>State</mat-label>
              <mat-select formControlName="state">
                <mat-option value="" disabled>
                  {{ contact_information.get("country")?.value ? "Select State" : "Select Country First" }}
                </mat-option>
                <mat-option *ngFor="let s of states()" [value]="s.id">
                  {{ s.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <!-- City -->
            <mat-form-field appearance="outline">
              <mat-label>City</mat-label>
              <mat-select formControlName="city">
                <mat-option value="" disabled>
                  {{ contact_information.get("state")?.value ? "Select City" : "Select State First" }}
                </mat-option>
                <mat-option *ngFor="let c of cities()" [value]="c.id">
                  {{ c.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <!-- Postal Code -->
          <mat-form-field appearance="outline">
            <mat-label>Postal Code</mat-label>
            <input matInput formControlName="postal_code" />
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- ===========================
         IDENTITY DOCUMENTS
    ============================ -->
    <mat-card class="mat-section" formGroupName="identity_documents">
      <mat-card-header>
        <mat-card-title>Identity & Verification</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="grid grid-2">
          <div class="grid grid-2 full-width">
            <app-file-input formControlName="employee_photo" label="Employee Photo"></app-file-input>
            <app-file-input formControlName="id_proof" label="ID Proof"></app-file-input>
            <app-file-input formControlName="address_proof_file" label="Address Proof"></app-file-input>
            <app-file-input formControlName="pan_card" label="PAN Card"></app-file-input>
          </div>

          <mat-form-field appearance="outline">
            <mat-label>PAN Number</mat-label>
            <input matInput formControlName="pan_number" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Passport Number</mat-label>
            <input matInput formControlName="passport_number" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Aadhaar Number</mat-label>
            <input matInput formControlName="aadhaar_number" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Access Card ID</mat-label>
            <input matInput formControlName="access_card_id" />
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- ===========================
         EDUCATION & CAREER
    ============================ -->
    <mat-card class="mat-section" formGroupName="education_and_career">
      <mat-card-header>
        <mat-card-title>Education & Career</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="grid grid-3">
          <app-file-input formControlName="educational_certificates" label="Educational Certificates"></app-file-input>
          <app-file-input formControlName="experience_certificates" label="Experience Certificates"></app-file-input>
          <app-file-input formControlName="resume_cv" label="Resume / CV"></app-file-input>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- ===========================
         EMPLOYMENT DOCUMENTS
    ============================ -->
    <mat-card class="mat-section" formGroupName="employment_documents">
      <mat-card-header>
        <mat-card-title>Employment Documents</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="grid grid-3">
          <app-file-input formControlName="joining_letter" label="Joining Letter"></app-file-input>
          <app-file-input formControlName="relieving_letter" label="Relieving Letter"></app-file-input>
          <app-file-input formControlName="other_documents" label="Other Documents"></app-file-input>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- ===========================
         ADDITIONAL INFORMATION
    ============================ -->
    <mat-card class="mat-section" formGroupName="other">
      <mat-card-header>
        <mat-card-title>Additional Information</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="grid grid-2">
          <mat-form-field appearance="outline">
            <mat-label>Emergency Contact Name</mat-label>
            <input matInput formControlName="emergency_contact_name" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Emergency Contact Number</mat-label>
            <input matInput formControlName="emergency_contact_number" type="tel" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Blood Group</mat-label>
            <mat-select formControlName="blood_group">
              <mat-option value="" disabled>Select Blood Group</mat-option>
              <mat-option *ngFor="let option of bloodGroupOptions" [value]="option.id">
                {{ option.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- ===========================
         CAPTCHA + BUTTONS
    ============================ -->
    <div class="actions">
      <div class="captcha-container">
        <ngx-recaptcha2
            [siteKey]="'6LdGawssAAAAAJdfBSyQc9EShLEp3N-uGbCxY04d'"
            (success)="onCaptchaResolved($event)"
         ></ngx-recaptcha2>

      </div>

      <div class="button-group">
        <button mat-stroked-button type="button" (click)="onReset()">Reset Form</button>

        <button
          mat-raised-button
          color="primary"
          type="submit"
          *ngIf="captchaVerified"
          [disabled]="employeeForm.invalid"
        >
          Submit
        </button>
      </div>
    </div>
  </form>
</div>
