<div class="file-input-wrapper">
  <label [for]="id" class="file-label">{{ label() }}</label>

  <div class="file-dropzone"
       [class.dragging]="isDragging()"
       (click)="triggerFileInputClick()"
       (dragover)="onDragOver($event)"
       (dragleave)="onDragLeave($event)"
       (drop)="onDrop($event)">
    <ng-container *ngIf="!selectedFileNames().length; else selected">
      <mat-icon class="file-icon">upload_file</mat-icon>
      <p class="upload-text"><span class="highlight">Click to upload</span> or drag and drop</p>
      <p class="hint-text">{{ acceptLabel() }}</p>
    </ng-container>

    <ng-template #selected>
      <div class="file-list">
        <p class="upload-text">Selected file(s):</p>
        <ul>
          <li *ngFor="let n of selectedFileNames()">{{ n }}</li>
        </ul>
      </div>
      <button mat-icon-button matTooltip="Clear selected files" class="clear-btn" (click)="clearFiles()">
        <mat-icon>close</mat-icon>
      </button>
    </ng-template>

    <input #fileInput type="file" class="hidden" [accept]="accept()" [multiple]="multiple()" (change)="onFileSelected($event)" />
  </div>
</div>
